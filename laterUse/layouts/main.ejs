// app.listen(port,() => console.info(`listening on port ${port}`))
// app.post('/upload',upload.single('file'),  async (req, res) => {
//   var imageFile =   req.file.filename;
//   var success = req.file.fieldname + "uploaded successfully";
//   var imageDetails = new uploadModel({
//     imagename: imageFile
//   })

//   imageDetails.save(function(err,doc) {
//     if(err) throw err;
//     imageData.exec(function(err,data)
//     {
//       if(err) throw err;
//       res.render('sample', { title: 'Upload File',records:data,  success: success});
//     });
//     // res.render('sample', { title: 'Upload File', success :'' });
//   })
//   const result = await cloudinary.v2.uploader.upload(req.file.path)
//   // res.send(result)
// })
// app.get('/upload',function(req,res,next){
//   imageData.exec(function(err,data){
//     if(err) throw err;
//     res.render('sample', { title: 'Upload File',records:data,  success:''});
//   })
// })
  // app.get('/store', isAuthenticated,function(req, res) {
  //   fs.readFile('items.json', function(error, data) {
  //     if (error) {
  //       res.status(500).end()
  //     } else {
  //       res.render('store.ejs', {
          
  //         items: JSON.parse(data)
  //       })
  //     }
  //   })
  // })

  

// app.get("/profile",isAuthenticated, (req,res) =>{
//     res.send(req.user);
// })

// app.get("/logout" ,isAuthenticated,(req,res) => {
//     req.logout();
//     res.redirect("/")
// })

// app.post("/login",passport.authenticate("local",{failureRedirect: "/register",
//  successRedirect : "/user"}),
// );

// app.post("/register",async (req,res) =>{
//     const user = await User.findOne({username: req.body.username});

//     if(user) return res.status(400).send("user already exists");

//     const newUser = await User.create(req.body);
//     res.redirect("/login");
//     //  res.status(201).send(newUser);
// });'\
// app.get('/user',isAuthenticated,(req,res) =>{
//     res.render('user')
    
// })
// initializingPassport(passport);


// app.use(expressSession({secret : "secret",resave :false,
// saveUninitialized:false}));
// app.use(passport.initialize());
// app.use(passport.session());
// app.get('*', function(req,res,next){
//     res.locals.user = req.user || null;
//     next();
// });
// var test = require('./public/test');

// res.render('about', {
//     utils: test
// });
// const passport = require('passport');
// const {initializingPassport,isAuthenticated} = require("./passportConfig.js");
// const upload = require('./handler/multer')