{"version":3,"file":"index.js","sources":["../../../../src/gcpfunction/index.ts"],"sourcesContent":["import * as Sentry from '@sentry/node';\nimport type { Integration } from '@sentry/types';\n\nimport { GoogleCloudGrpc } from '../google-cloud-grpc';\nimport { GoogleCloudHttp } from '../google-cloud-http';\nimport { serverlessEventProcessor } from '../utils';\n\nexport * from './http';\nexport * from './events';\nexport * from './cloud_events';\n\nexport const defaultIntegrations: Integration[] = [\n  ...Sentry.defaultIntegrations,\n  new GoogleCloudHttp({ optional: true }), // We mark this integration optional since '@google-cloud/common' module could be missing.\n  new GoogleCloudGrpc({ optional: true }), // We mark this integration optional since 'google-gax' module could be missing.\n];\n\n/**\n * @see {@link Sentry.init}\n */\nexport function init(options: Sentry.NodeOptions = {}): void {\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n\n  options._metadata = options._metadata || {};\n  options._metadata.sdk = {\n    name: 'sentry.javascript.serverless',\n    integrations: ['GCPFunction'],\n    packages: [\n      {\n        name: 'npm:@sentry/serverless',\n        version: Sentry.SDK_VERSION,\n      },\n    ],\n    version: Sentry.SDK_VERSION,\n  };\n\n  Sentry.init(options);\n  Sentry.addGlobalEventProcessor(serverlessEventProcessor);\n}\n"],"names":["GoogleCloudHttp","GoogleCloudGrpc","serverlessEventProcessor"],"mappings":";;;;;;;;;;AAWA,MAAA,mBAAA,GAAA;AACA,EAAA,GAAA,MAAA,CAAA,mBAAA;AACA,EAAA,IAAAA,+BAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA;AACA,EAAA,IAAAC,+BAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA;AACA,EAAA;AACA;AACA;AACA;AACA;AACA,SAAA,IAAA,CAAA,OAAA,GAAA,EAAA,EAAA;AACA,EAAA,IAAA,OAAA,CAAA,mBAAA,KAAA,SAAA,EAAA;AACA,IAAA,OAAA,CAAA,mBAAA,GAAA,mBAAA,CAAA;AACA,GAAA;AACA;AACA,EAAA,OAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,EAAA,CAAA;AACA,EAAA,OAAA,CAAA,SAAA,CAAA,GAAA,GAAA;AACA,IAAA,IAAA,EAAA,8BAAA;AACA,IAAA,YAAA,EAAA,CAAA,aAAA,CAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA;AACA,QAAA,IAAA,EAAA,wBAAA;AACA,QAAA,OAAA,EAAA,MAAA,CAAA,WAAA;AACA,OAAA;AACA,KAAA;AACA,IAAA,OAAA,EAAA,MAAA,CAAA,WAAA;AACA,GAAA,CAAA;AACA;AACA,EAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAAA,CAAA;AACA,EAAA,MAAA,CAAA,uBAAA,CAAAC,8BAAA,CAAA,CAAA;AACA;;;;;;;;"}